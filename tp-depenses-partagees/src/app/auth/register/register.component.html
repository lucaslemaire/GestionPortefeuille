<main>
  <div class="container">
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()"   novalidate>
      <div class="text-center mb-4">
        <h1 class="h3 mt-3 mb-3 font-weight-normal">Bienvenue</h1>
        <p>Partage tes dépenses</p>
        <hr>
      </div>
      <div class="form-group" [ngClass]="{ 'has-error': !nom.valid && (nom.dirty || nom.touched) }">
        <label for="nom">Nom</label>
        <input type="text" formControlName="nom"  name="nom" required class="form-control" id="nom" placeholder="Nom">
        <div *ngIf="nom.invalid && (nom.dirty || nom.touched)" >
          <div *ngIf="nom?.errors.required">Vous devez spécifier votre nom</div>
        </div>
      </div>
      <div class="form-group" [ngClass]="{ 'has-error': !prenom.valid && (prenom.dirty || prenom.touched) }">
        <label for="prenom">Prenom</label>
        <input type="text" formControlName="prenom"  name="prenom" required class="form-control" id="prenom" placeholder="Prenom">
        <div *ngIf="prenom.invalid && (prenom.dirty || prenom.touched)" >
          <div *ngIf="prenom?.errors.required">Vous devez spécifier votre prénom</div>
        </div>
      </div>
      <div class="form-group" [ngClass]="{ 'has-error': !email.valid && (email.dirty || email.touched) }">
        <label for="email">Adresse mail</label>
        <input type="email" formControlName="email"  name="email" required class="form-control" id="email" aria-describedby="emailHelp" placeholder="Adresse mail">
        <div *ngIf="email.invalid && (email.dirty || email.touched)" >
          <div *ngIf="email?.errors.required">L'adresse mail est obligatoire</div>
          <div *ngIf="email?.errors.email">Le format de l'adresse mail n'est pas valide</div>
        </div>
      </div>
      <div class="form-group" [ngClass]="{ 'has-error': !password.valid && (password.dirty || password.touched) }">
        <label for="password">Mot de passe</label>
        <input type="password" formControlName="password" name="password" required minlength="6" class="form-control" id="password" placeholder="Mot de passe">
        <div *ngIf="password.invalid && (password.dirty || password.touched)" >
          <div *ngIf="password?.errors.required">Password is required</div>
          <div *ngIf="password?.errors.minlength">Password must be at least 6 characters</div>
        </div>
      </div>
      <div class="form-group" [ngClass]="{ 'has-error': !confirm_password.valid && (confirm_password.dirty || confirm_password.touched) }">
        <label for="confirm_password">Confirmer le mot de passe</label>
        <input type="password" formControlName="confirm_password" name="confirm_password" required minlength="6" class="form-control" id="confirm_password" placeholder="Confirmer le mot de passe">
        <div *ngIf="confirm_password.invalid && (confirm_password.dirty || confirm_password.touched)" >
          <div *ngIf="confirm_password?.errors.required">Password is required</div>
          <div *ngIf="confirm_password?.errors.minlength">Password must be at least 6 characters</div>
        </div>
      </div>
      <div  *ngIf="error" class="alert alert-danger" role="alert">
        Ops: {{ error.error }}
      </div>
      <button [disabled]="!registerForm.valid" class="btn btn-lg btn-primary btn-block mt-5" type="submit">Register</button>
    </form>
  </div>
</main>
